module TimeFilter
(
	input Clk,
	input [Filter_Timer_Width-1:0] Filter_Timer,
	input code_in,
	output reg ready = 1'b0,
	output reg code_out = 1'b0
);
	parameter Filter_Timer_Width = 16;
	reg [Filter_Timer_Width-1:0] Filter_Timer_cnt;
	reg code_reg = 1'b0;
	
	
	always @ (posedge Clk)
	begin
		code_reg <= code_in;
		if(code_reg == code_in) 
		begin 
			if(Filter_Timer_cnt >= Filter_Timer)
			begin
				Filter_Timer_cnt <= Filter_Timer_cnt;		
				code_out <= code_in;
				ready <= 1'b1;
			end
			else
			begin
				Filter_Timer_cnt <= Filter_Timer_cnt + 16'd1;
				code_out <= code_out;
				ready <= ready;
			end
		end 
		else
		begin
			ready <= ready;
			code_out <= code_out;
			Filter_Timer_cnt <= 16'd0;
		end 
	end 

endmodule 